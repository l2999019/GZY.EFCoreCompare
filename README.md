# GZY.EFCoreCompare

**GZY.EFCoreCompare** 是一个用于 **对比数据库结构和 EF Core 代码中的 DbContext** 的库。它基于 **EF Core 的 Scaffolding** 机制，生成 `DatabaseModel`（从数据库提取的模型），并与代码中的 `DbContext` 进行比对，从而找出两者之间的差异。

## 主要用途
1. **检查数据库与代码是否匹配**  
   - 通过 **EF Core Scaffolding** 解析数据库结构（`DatabaseModel`）。  
   - 读取代码中的 `DbContext` 及其 `DbSet<TEntity>` 实体定义。  
   - 对比两者的字段、表、主键、索引等内容。  

2. **检测并生成数据库更新 SQL**  
   - 发现 **数据库中有但代码中没有的表**（可能需要删除）。  
   - 发现 **代码中有但数据库中缺失的表或字段**（可能需要添加）。  
   - 发现 **数据类型、索引、约束等的差异**（可能需要修改）。

3. **帮助团队进行数据库变更管理**  
   - 在开发过程中，**避免数据库和代码模型不同步**。  
   - 适用于 **数据库先行** 和 **代码先行** 的开发模式，确保两者一致。  
   - 可用于 **自动化 CI/CD 流水线**，在部署前发现问题。
   - 可用于 **部署/更新后判断数据库是否标准**，在部署后发现客户或线上的问题。

## 工作流程
1. **获取数据库结构**  
   使用 EF Core **Scaffolding** 解析数据库，并生成 `DatabaseModel`。  
2. **读取代码中的 `DbContext`**  
   反射或解析代码中的 `DbContext` 及其实体。  
3. **比对两者的差异**  
   找出 **表、字段、类型、索引、主键、外键** 等方面的不同。  
4. **提供UI查看界面与Execl报告**  
   - 提供 **UI查看界面**，用于图形化查看差异。  
   - 生成 **差异报告**，供开发人员参考。  
